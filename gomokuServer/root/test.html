<!DOCTYPE html>
<html>
<title>Websocket example</title>
<script>
	var socket = new WebSocket("ws://" + document.domain + ':' + location.port, "ws-protocol-example");
	function update(msg) { document.getElementById("num").innerHTML = msg; }
	socket.onopen = function () { console.log("socket open"); update("open"); }
	socket.onclose = function () { console.log("socket close"); update("closed"); }
	socket.onmessage = function (msg) { console.log("socket message: " + msg.data); update(msg.data); }


</script>

<body>
	<p id="num"></p>
	<p>Hello World</p>
	<button onclick="btn_click()">clickA</button>
	<script>
		var text = '{"type":"hhhh","sex":"male"}';
		function btn_click() {
			alert("click");
			socket.send(text);
			update("A");
		}
	</script>
</body>

</html>